<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <meta name="author" content="Jan Verbesselt, Jorge Mendes de Jesus, Aldo Bergsma, Johannes Eberenz, Dainius Masiliunas, David Swinkels, Corné Vreugdenhil" />
  <title>Week 3, Lesson 9: Introduction to Python for Geo-Scripting</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!-- jQuery -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.10.3/jquery-ui.min.js"></script>
  
  <!-- bootstrap -->
  <!--<link href="https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css" rel="stylesheet"  id="style">-->
  <script src="https://netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>
  
  <!-- highlight.js -->
  <!--<link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/7.3/styles/default.min.css" rel="stylesheet" id="code-style">-->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/7.3/highlight.min.js"></script>
  <script>
  hljs.LANGUAGES.r=function(a){var b="([a-zA-Z]|\\.[a-zA-Z.])[a-zA-Z0-9._]*";return{c:[a.HCM,{b:b,l:b,k:{keyword:"function if in break next repeat else for return switch while try tryCatch|10 stop warning require library attach detach source setMethod setGeneric setGroupGeneric setClass ...|10",literal:"NULL NA TRUE FALSE T F Inf NaN NA_integer_|10 NA_real_|10 NA_character_|10 NA_complex_|10"},r:0},{cN:"number",b:"0[xX][0-9a-fA-F]+[Li]?\\b",r:0},{cN:"number",b:"\\d+(?:[eE][+\\-]?\\d*)?L\\b",r:0},{cN:"number",b:"\\d+\\.(?!\\d)(?:i\\b)?",r:0},{cN:"number",b:"\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d*)?i?\\b",r:0},{cN:"number",b:"\\.\\d+(?:[eE][+\\-]?\\d*)?i?\\b",r:0},{b:"`",e:"`",r:0},{cN:"string",b:'"',e:'"',c:[a.BE],r:0},{cN:"string",b:"'",e:"'",c:[a.BE],r:0}]}}(hljs); </script>
  <!--<script type="text/javascript", src="https://yandex.st/highlightjs/7.3/languages/r.min.js"></script>-->
  
  <!-- Manific Popup -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/magnific-popup.js/0.8.9/jquery.magnific-popup.min.js"></script>
  
  <script type="text/javascript"
    src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  </script>
  <script defer="defer">
  // Function to generate the dynamic table of contents
  jQuery.fn.generate_TOC = function () {
    var base = $(this[0]);
  
    var selectors = ['h1', 'h2', 'h3', 'h4'];
  
    var last_ptr = [{}, {}, {}, {}];
  
    var anchors = {};
  
    generate_anchor = function (text) {
      var test = text.replace(/\W/g, '_');
  
      while(test in anchors){
        //if no suffix, add one
        if(test.match(/_\d+$/) === null){
          test = test + "_2";
        }
        //else generate unique id for duplicates by adding one to the suffix
        else {
          test = test.replace(/_(\d+)$/, function(match, number){ var num=+number+1; return("_" + num) });
        }
      }
      anchors[test]=1;
      return(test);
    }
  
    $(selectors.join(',')).filter(function(index) { return $(this).parent().attr("id") != 'header'; }).each(function () {
  
      var heading = $(this);
      var idx = selectors.indexOf(heading.prop('tagName').toLowerCase());
      var itr = 0;
  
      while (itr <= idx) {
        if (jQuery.isEmptyObject(last_ptr[itr])) {
          last_ptr[itr] = $('<ul>').addClass('nav');
          if (itr === 0) {
            base.append(last_ptr[itr])
          } else {
            if(last_ptr[itr-1].children('li').length === 0){
              last_ptr[itr-1].append(last_ptr[itr]);
            }
            else {
              last_ptr[itr - 1].children('li').last().append(last_ptr[itr]);
            }
          }
        }
        itr++;
      }
      var anchor = generate_anchor(heading.text());
      heading.attr('id', anchor);
      var a = $('<a>')
      .text(heading.text())
      .attr('href', '#' + anchor);
  
    var li = $('<li>')
      .append(a);
  
    last_ptr[idx].append(li);
    for (i = idx + 1; i < last_ptr.length; i++) {
      last_ptr[i] = {};
    }
    });
  }
  /* run scripts when document is ready */
  $(function() {
    "use strict";
  
    var $window = $(window);
    var $body = $(document.body);
  
    /* size of thumbnails */
  
    var hidden_types = ['source']
    var output_types = ['output', 'message', 'warning', 'error']
  
    /* style tables */
    $('table').addClass('table table-striped table-bordered table-hover table-condensed');
  
    $('pre code').each(function(i, e) {
      hljs.highlightBlock(e);
    });
  
    /* Magnific Popup */
    $(".thumbnail").each(function(){
      $(this).magnificPopup({
        disableOn: 768,
        closeOnContentClick: true,
  
        type: 'image',
        items: {
          src: $(this).find('img').attr('src'),
        }
      });
    });
  
    function toggle_block(obj, show) {
      var span = obj.find('span');
      if(show === true){
        span.removeClass('glyphicon-chevron-up').addClass('glyphicon-chevron-down');
        obj.next('pre').slideDown();
      }
      else {
        span.removeClass('glyphicon-chevron-down').addClass('glyphicon-chevron-up');
        obj.next('pre').slideUp();
      }
    }
  
    function toggle_thumbnails(imgs, show){
      if(show === true){
        imgs.parents().show()
        imgs.slideDown();
      }
      else {
        imgs.slideUp(400, function(){ $(this).parent().hide(); });
      }
    }
  
    function global_toggle(obj){
      var type = obj.attr('type');
      var show = !obj.parent('li').hasClass('active');
      if(show === true){
        obj.parent('li').addClass('active');
      }
      else{
        obj.parent('li').removeClass('active');
      }
      if(type == 'figure'){
        toggle_thumbnails($('.thumbnail img'), show);
      }
      else {
        $('.toggle.' + type).each(function() { toggle_block($(this), show); });
      }
    }
  
    /* onclick toggle next code block */
    $('.toggle').click(function() {
      var span = $(this).find('span');
      toggle_block($(this), !span.hasClass('glyphicon-chevron-down'));
      return false
    })
  
    // global toggles
    $('.toggle-global').click(function(){
      var type = $(this).attr('type');
      if(type === 'all-source'){
          $('li a.source').each(function() {
            global_toggle($(this));
          });
        }
      else if(type === 'all-output'){
        $.each(output_types, function(i, val){
          console.log(val);
          global_toggle($('li a.' + val));
        });
      }
      else {
        console.log($(this));
        global_toggle($(this));
      }
      return false;
    });
    /* table of contents */
    if($(['h1', 'h2', 'h3', 'h4'].join(',')).length > 0){
      $('body > #wrap > .container > .row').append('<div class="col-md-2"><div id="toc" class="well sidebar sidenav affix hidden-print"/></div>');
      $('#toc').generate_TOC();
    }
  
    $.each(hidden_types, function(i, type) {
      $('li[type=' + type + ']').each(function(){ global_toggle($(this)); });
    });
  
    /* remove paragraphs with no content */
    $('p:empty').remove();
  
    $body.scrollspy({
      target: '.sidebar',
    });
  
    /* theme switch */
    $('.theme-switch').click(function(){
      var css = $('link[title=' + $(this).attr('title') + ']');
      $('#theme[rel=stylesheet]').attr('href', css.attr('href'));
      $('.theme-switch').closest('li').removeClass('active');
      $(this).closest('li').addClass('active');
      return false;
    });
    /* code style switch */ //TODO use same function for both of these?
    $('.highlight-switch').click(function(){
      var css = $('link[title="' + $(this).attr('title') + '"]');
      $('#highlight[rel=stylesheet]').attr('href', css.attr('href'));
      $('.highlight-switch').closest('li').removeClass('active');
      $(this).closest('li').addClass('active');
      return false;
    });
  
    //TODO refresh on show/hide
    $window.on('load', function () {
      $body.scrollspy('refresh');
    })
  
  });
  
  </script>
  <style>
  /* Knitr_bootstrap styles */
  #header {
    display: none !important;
    visibility: hidden !important;
  }
  #wrap .container-fluid {
    padding: 0;
    overflow: hidden;
  }
  .toggle{
    text-transform: capitalize;
  }
  
  .toggle-global{
    text-transform: capitalize;
  }
  
  /* Sticky footer styles */
  * {
    margin:0;
  }
  html,
  body {
      height: 100%;
      padding:0 !important;
      /* The html and body elements cannot have any padding or margin. */
      /*overflow-x: hidden;*/
  }
  
  /* Wrapper for page content to push down footer */
  #wrap {
      min-height: 100%;
      height: auto !important;
      height: 100%;
      /* Negative indent footer by it's height */
      margin: 0 auto -120px;
  }
  
  /* Set the fixed height of the footer here */
  #push,
  #footer {
      height: 120px;
  }
  
  #footer {
    text-align: center;
  }
  
  /* Top level subheader elements.  These are the first nested items underneath a header element. */
  .header li {
    font-size: 20px;
  }
  
  /* Makes the font smaller for all subheader elements. */
  .sub-header li {
      font-size: 12px;
  }
  
  button.thumbnails {
    margin-left:0px;
  }
  
  /*
   * Side navigation
   *
   * Scrollspy and affixed enhanced navigation to highlight sections and secondary
   * sections of docs content.
   */
  
  /* By default it's not affixed in mobile views, so undo that */
  .sidebar.affix {
    position: static;
  }
  
  /* First level of nav */
  .sidenav {
    margin-top: 30px;
    margin-bottom: 30px;
    padding-top:    10px;
    padding-bottom: 10px;
    border-radius: 5px;
  }
  
  /* All levels of nav */
  .sidebar .nav > li > a {
    display: block;
    padding: 5px 20px;
  }
  .sidebar .nav > li > a:hover,
  .sidebar .nav > li > a:focus {
    text-decoration: none;
    border-right: 1px solid;
  }
  .sidebar .nav > .active > a,
  .sidebar .nav > .active:hover > a,
  .sidebar .nav > .active:focus > a {
    font-weight: bold;
    background-color: transparent;
    border-right: 1px solid;
  }
  
  /* Nav: second level (shown on .active) */
  .sidebar .nav .nav {
    display: none; /* Hide by default, but at >768px, show it */
    margin-bottom: 8px;
  }
  .sidebar .nav .nav > li > a {
    padding-top:    3px;
    padding-bottom: 3px;
    padding-left: 30px;
    font-size: 90%;
  }
  
  .sidebar .nav .nav .nav > li > a {
    padding-left: 40px;
  }
  .sidebar .nav .nav .nav .nav > li > a {
    padding-left: 50px;
  }
  
  /* Show and affix the side nav when space allows it */
  @media screen and (min-width: 992px) {
    .sidebar .nav > .active > ul {
      display: block;
    }
    /* Widen the fixed sidebar */
    .sidebar.affix,
    .sidebar.affix-bottom {
      width: 213px;
    }
    .sidebar.affix-top,
    .sidebar.affix {
      position: fixed; /* Undo the static from mobile first approach */
      top: 30px;
    }
    .sidebar.affix-bottom {
      position: absolute; /* Undo the static from mobile first approach */
    }
    .sidebar.affix-bottom .sidenav,
    .sidebar.affix .sidenav {
      margin-top: 0;
      margin-bottom: 0;
    }
  }
  @media screen and (min-width: 1200px) {
    /* Widen the fixed sidebar again */
    .sidebar.affix-bottom,
    .sidebar.affix {
      width: 263px;
    }
  }
  
  #toc {
    padding: 10px 0px;
    margin:0;
    border:0;
  }
  
  
  .panel pre {
    margin: 0;
    padding: 0;
    border: 0;
  }
  button + pre {
    margin: 0;
    padding: 0;
  }
  pre code {
    border-radius: 0;
  }
  /* Magnific Popup CSS */
  .mfp-bg {
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 1042;
    overflow: hidden;
    position: fixed;
    background: #0b0b0b;
    opacity: 0.8;
    filter: alpha(opacity=80); }
  
  .mfp-wrap {
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 1043;
    position: fixed;
    outline: none !important;
    -webkit-backface-visibility: hidden; }
  
  .mfp-container {
    text-align: center;
    position: absolute;
    width: 100%;
    height: 100%;
    left: 0;
    top: 0;
    padding: 0 8px;
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box; }
  
  .mfp-container:before {
    content: '';
    display: inline-block;
    height: 100%;
    vertical-align: middle; }
  
  .mfp-align-top .mfp-container:before {
    display: none; }
  
  .mfp-content {
    position: relative;
    display: inline-block;
    vertical-align: middle;
    margin: 0 auto;
    text-align: left;
    z-index: 1045; }
  
  .mfp-inline-holder .mfp-content,
  .mfp-ajax-holder .mfp-content {
    width: 100%;
    cursor: auto; }
  
  .mfp-ajax-cur {
    cursor: progress; }
  
  .mfp-zoom-out-cur,
  .mfp-zoom-out-cur .mfp-image-holder .mfp-close {
    cursor: -moz-zoom-out;
    cursor: -webkit-zoom-out;
    cursor: zoom-out; }
  
  .mfp-zoom {
    cursor: pointer;
    cursor: -webkit-zoom-in;
    cursor: -moz-zoom-in;
    cursor: zoom-in; }
  
  .mfp-auto-cursor .mfp-content {
    cursor: auto; }
  
  .mfp-close,
  .mfp-arrow,
  .mfp-preloader,
  .mfp-counter {
    -webkit-user-select: none;
    -moz-user-select: none;
    user-select: none; }
  
  .mfp-loading.mfp-figure {
    display: none; }
  
  .mfp-hide {
    display: none !important; }
  
  .mfp-preloader {
    color: #cccccc;
    position: absolute;
    top: 50%;
    width: auto;
    text-align: center;
    margin-top: -0.8em;
    left: 8px;
    right: 8px;
    z-index: 1044; }
  
  .mfp-preloader a {
    color: #cccccc; }
  
  .mfp-preloader a:hover {
    color: white; }
  
  .mfp-s-ready .mfp-preloader {
    display: none; }
  
  .mfp-s-error .mfp-content {
    display: none; }
  
  button.mfp-close,
  button.mfp-arrow {
    overflow: visible;
    cursor: pointer;
    background: transparent;
    border: 0;
    -webkit-appearance: none;
    display: block;
    padding: 0;
    z-index: 1046;
    -webkit-box-shadow: none;
    box-shadow: none; }
  
  button::-moz-focus-inner {
    padding: 0;
    border: 0; }
  
  .mfp-close {
    width: 44px;
    height: 44px;
    line-height: 44px;
    position: absolute;
    right: 0;
    top: 0;
    text-decoration: none;
    text-align: center;
    opacity: 0.65;
    padding: 0 0 18px 10px;
    color: white;
    font-style: normal;
    font-size: 28px;
    font-family: Arial, Baskerville, monospace; }
    .mfp-close:hover, .mfp-close:focus {
      opacity: 1; }
    .mfp-close:active {
      top: 1px; }
  
  .mfp-close-btn-in .mfp-close {
    color: #333333; }
  
  .mfp-image-holder .mfp-close,
  .mfp-iframe-holder .mfp-close {
    color: white;
    right: -6px;
    text-align: right;
    padding-right: 6px;
    width: 100%; }
  
  .mfp-counter {
    position: absolute;
    top: 0;
    right: 0;
    color: #cccccc;
    font-size: 12px;
    line-height: 18px; }
  
  .mfp-arrow {
    position: absolute;
    opacity: 0.65;
    margin: 0;
    top: 50%;
    margin-top: -55px;
    padding: 0;
    width: 90px;
    height: 110px;
    -webkit-tap-highlight-color: rgba(0, 0, 0, 0); }
  
  .mfp-arrow:active {
    margin-top: -54px; }
  
  .mfp-arrow:hover,
  .mfp-arrow:focus {
    opacity: 1; }
  
  .mfp-arrow:before, .mfp-arrow:after,
  .mfp-arrow .mfp-b,
  .mfp-arrow .mfp-a {
    content: '';
    display: block;
    width: 0;
    height: 0;
    position: absolute;
    left: 0;
    top: 0;
    margin-top: 35px;
    margin-left: 35px;
    border: medium inset transparent; }
  .mfp-arrow:after,
  .mfp-arrow .mfp-a {
    border-top-width: 13px;
    border-bottom-width: 13px;
    top: 8px; }
  .mfp-arrow:before,
  .mfp-arrow .mfp-b {
    border-top-width: 21px;
    border-bottom-width: 21px; }
  
  .mfp-arrow-left {
    left: 0; }
    .mfp-arrow-left:after,
    .mfp-arrow-left .mfp-a {
      border-right: 17px solid white;
      margin-left: 31px; }
    .mfp-arrow-left:before,
    .mfp-arrow-left .mfp-b {
      margin-left: 25px;
      border-right: 27px solid #3f3f3f; }
  
  .mfp-arrow-right {
    right: 0; }
    .mfp-arrow-right:after,
    .mfp-arrow-right .mfp-a {
      border-left: 17px solid white;
      margin-left: 39px; }
    .mfp-arrow-right:before,
    .mfp-arrow-right .mfp-b {
      border-left: 27px solid #3f3f3f; }
  
  .mfp-iframe-holder {
    padding-top: 40px;
    padding-bottom: 40px; }
  
  .mfp-iframe-holder .mfp-content {
    line-height: 0;
    width: 100%;
    max-width: 900px; }
  
  .mfp-iframe-scaler {
    width: 100%;
    height: 0;
    overflow: hidden;
    padding-top: 56.25%; }
  
  .mfp-iframe-scaler iframe {
    position: absolute;
    display: block;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    box-shadow: 0 0 8px rgba(0, 0, 0, 0.6);
    background: black; }
  
  .mfp-iframe-holder .mfp-close {
    top: -40px; }
  
  /* Main image in popup */
  img.mfp-img {
    width: auto;
    max-width: 100%;
    height: auto;
    display: block;
    line-height: 0;
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
    padding: 40px 0 40px;
    margin: 0 auto; }
  
  /* The shadow behind the image */
  .mfp-figure:after {
    content: '';
    position: absolute;
    left: 0;
    top: 40px;
    bottom: 40px;
    display: block;
    right: 0;
    width: auto;
    height: auto;
    z-index: -1;
    box-shadow: 0 0 8px rgba(0, 0, 0, 0.6);
    background: #444444; }
  
  .mfp-figure {
    line-height: 0; }
  
  .mfp-bottom-bar {
    margin-top: -36px;
    position: absolute;
    top: 100%;
    left: 0;
    width: 100%;
    cursor: auto; }
  
  .mfp-title {
    text-align: left;
    line-height: 18px;
    color: #f3f3f3;
    word-wrap: break-word;
    padding-right: 36px; }
  
  .mfp-figure small {
    color: #bdbdbd;
    display: block;
    font-size: 12px;
    line-height: 14px; }
  
  .mfp-image-holder .mfp-content {
    max-width: 100%; }
  
  .mfp-gallery .mfp-image-holder .mfp-figure {
    cursor: pointer; }
  
  @media screen and (max-width: 800px) and (orientation: landscape), screen and (max-height: 300px) {
    /**
     * Remove all paddings around the image on small screen
     */
    .mfp-img-mobile .mfp-image-holder {
      padding-left: 0;
      padding-right: 0; }
  
    .mfp-img-mobile img.mfp-img {
      padding: 0; }
  
    /* The shadow behind the image */
    .mfp-img-mobile .mfp-figure:after {
      top: 0;
      bottom: 0; }
  
    .mfp-img-mobile .mfp-bottom-bar {
      background: rgba(0, 0, 0, 0.6);
      bottom: 0;
      margin: 0;
      top: auto;
      padding: 3px 5px;
      position: fixed;
      -webkit-box-sizing: border-box;
      -moz-box-sizing: border-box;
      box-sizing: border-box; }
  
    .mfp-img-mobile .mfp-bottom-bar:empty {
      padding: 0; }
  
    .mfp-img-mobile .mfp-counter {
      right: 5px;
      top: 3px; }
  
    .mfp-img-mobile .mfp-close {
      top: 0;
      right: 0;
      width: 35px;
      height: 35px;
      line-height: 35px;
      background: rgba(0, 0, 0, 0.6);
      position: fixed;
      text-align: center;
      padding: 0; }
  
    .mfp-img-mobile .mfp-figure small {
      display: inline;
      margin-left: 5px; } }
  @media all and (max-width: 900px) {
    .mfp-arrow {
      -webkit-transform: scale(0.75);
      transform: scale(0.75); }
  
    .mfp-arrow-left {
      -webkit-transform-origin: 0;
      transform-origin: 0; }
  
    .mfp-arrow-right {
      -webkit-transform-origin: 100%;
      transform-origin: 100%; }
  
    .mfp-container {
      padding-left: 6px;
      padding-right: 6px; } }
  .mfp-ie7 .mfp-img {
    padding: 0; }
  .mfp-ie7 .mfp-bottom-bar {
    width: 600px;
    left: 50%;
    margin-left: -300px;
    margin-top: 5px;
    padding-bottom: 5px; }
  .mfp-ie7 .mfp-container {
    padding: 0; }
  .mfp-ie7 .mfp-content {
    padding-top: 44px; }
  .mfp-ie7 .mfp-close {
    top: 0;
    right: 0;
    padding-top: 0; }
  
  //Magnific overrides
  .mfp-image img{
    background: white;
  }
  .mfp-figure:after {
    background: white;
  }
  
  /*
   * Off Canvas navbar toggle right
   * --------------------------------------------------
   */
  
  @media screen and (max-width: 768px) {
    .row-offcanvas .collapsing {
    -webkit-transition: none 0;
      -moz-transition: none 0;
      transition: none 0;
    }
   .row-offcanvas .navbar {
    position: absolute;
    z-index: 2;
      right:0;
      height:100%;
      width:55px;
      border:0;
      background-color:transparent;
    }
    .row-offcanvas .navbar-toggle {
      margin-right: 5px;
      margin-left: 5px;
    }
    .row-offcanvas {
      position: relative;
    }
    .row-offcanvas-right.active .navbar {
    position: absolute;
    z-index: 2;
      right: -28.4%;
      width:40%;
      background-color:#eee;
      border:0 solid #ddd;
      border-left-width:1px;
    }
    .row-offcanvas-right.active {
      left: -30%;
    }
    .row-offcanvas-right.active .navbar-collapse {
      position: relative;
      width: 100%;
    }
    .row-offcanvas .content {
    /*width:calc(100% - 60px);*/
    }
  }
  </style>
</head>
<body>
<div id="wrap">
<div class="container">
<div class="row row-offcanvas row-offcanvas-right">
<div class="contents col-xs-12 col-md-10">
<h1 id="wur-geoscripting"><a href="https://geoscripting-wur.github.io/">WUR Geoscripting</a> <img src="https://www.wur.nl/upload/5e55a1d9-47c3-4149-9384-26d5147ee2d7_WUR_RGB_standard.png" alt="WUR logo" style="height: 35px;"/></h1>
<h1 id="week-3-lesson-9-introduction-to-python-for-geo-scripting">Week 3, Lesson 9: Introduction to Python for Geo-Scripting</h1>
<p><em>Jan Verbesselt, Jorge Mendes de Jesus, Aldo Bergsma, Johannes Eberenz, Dainius Masiliunas, David Swinkels, Corné Vreugdenhil</em> - 2020-11-24</p>
<h2 id="introduction">Introduction</h2>
<p>Good morning! Today we will start working with Python for Geo-scripting and do a refresher of functions in Python. Today’s schedule is as following:</p>
<ul>
<li>Follow one of the Datacamp courses as introduction into Python</li>
<li>Get Introduced to Python Environment</li>
<li>Learn how to work with virtual environments: Conda</li>
<li>Learn how to create a Jupyter Notebook</li>
<li>Refresh Python programming knowledge</li>
<li>Check a nice example of a Jupyter Notebook</li>
</ul>
<h2 id="follow-intro-to-python-course-on-datacamp">Follow Intro to Python course on Datacamp</h2>
<p>Datacamp has courses on R, Python and SQL. Most popular modules in Python are covered in Datacamp too. As assignment for today (or actually exercise), you will have to finish one of the Python Datacamp courses listed below.</p>
<ul>
<li><a href="https://www.datacamp.com/courses/intro-to-python-for-data-science">Introduction to Python</a> | recommended to follow if you haven’t any scripting experience so far</li>
<li><a href="https://www.datacamp.com/courses/python-for-r-users">Python for R users</a> | recommended if you have experience already in R</li>
</ul>
<h2 id="introduction-to-python-environment">Introduction to Python Environment</h2>
<p>Python is a jack-of-all-trades programming language, that is free, flexible, open-source, cross-platform and has a very large community behind it. If you ask Python programmers what they like most about Python, they will often cite its high readability and high availability of good packages. There is a lot of powerful Python packages out there for geo-scripting, data wrangling, visualization and machine learning. For example:</p>
<ul>
<li>Geo Scripting
<ul>
<li>GeoPandas (Vector Processing)</li>
<li>RasterIO (Raster Processing)</li>
<li>GDAL/OGR (Vector and Raster Processing)</li>
<li>QGIS plugins (Open Source GIS)</li>
<li>ArcPy (Propietary GIS)</li>
</ul></li>
<li>Data Handling
<ul>
<li>Pandas (Dataframes and Data Analysis)</li>
<li>Numpy (Scientific Computing)</li>
</ul></li>
<li>Visualization
<ul>
<li>Matplotlib (General Graphics)</li>
<li>Seaborn (Statistical Graphics)</li>
<li>Folium (Interactive Maps)</li>
</ul></li>
<li>Machine Learning
<ul>
<li>TensorFlow (Deep Learning)</li>
<li>Keras (Deep/Machine Learning)</li>
<li>Scikit-Learn (Machine Learning)</li>
</ul></li>
</ul>
<h3 id="python-editors-and-ides">Python editors and IDEs</h3>
<p>There are a number of Integrated Development Environments [IDE] for Python. An IDE is a software application that provides facilities for software development.</p>
<ul>
<li><a href="https://www.spyder-ide.org/">Spyder</a> is a nice lightweight IDE. In the Geo-scripting course Spyder is recommended as the Python IDE.</li>
<li><a href="http://jupyter.org/">Jupyter Notebook</a> integrates visualizations together with code and is highly suitable to make tutorials or simple dashboards. Jupyter Notebooks run in your browser on a localhost server or on a web server. Jupyter Notebooks are nice to make quick visualizations and do prototype testing. It allows different programming languages. You can have a Python, R, Julia, Spark or PySpark kernel in the notebook. Today the Jupyter Notebook with a Python kernel will be used and explained.</li>
<li><a href="https://www.jetbrains.com/help/pycharm/install-and-set-up-pycharm.html">PyCharm Community Edition</a> is a free professional Python IDE with a lot of advanced functionality, such as integrated GIT version control, code completion, code checking, debugging and navigation. This IDE can optionally be used by more advanced scripters during the Geo-scripting course instead of Spyder, but do know there won’t be support for it since the focus of Geo-scripting is on learning to script.</li>
</ul>
<h3 id="python-package-management">Python package management</h3>
<p>A set of tools co-exist for installing and managing packages. It is possible to install packages on your base Python interpreter, but sooner or later you will get conflicting Python packages since packages have varying dependencies. It can even <a href="https://askubuntu.com/questions/95037/what-is-the-best-way-to-install-python-packages">break your system Python interpreter</a>. So instead per project an environment is created on your local machine, where Python packages can be installed and organized. For each project it is recommended to make a new environment. Another way to handle conflicting Python packages is with the distribution package manager of Ubuntu. The available Python packages of the distribution manager have been tested to work together, but some cons are that it does not have all packages and sometimes has outdated packages. There are three recommended ways to install packages, which we list below sorted from most preferred to less preferred:</p>
<ul>
<li>Using <a href="https://conda.io/docs/user-guide/tasks/manage-pkgs.html">conda</a> to install packages and to keep separate sets of packages. A set of of packages in <em>Conda</em> is called a conda environment. <em>Conda</em> is available for Windows, macOS and Linux. In the conda environments basically anything, such as software, C libraries or R packages, can be installed.</li>
<li>Using <em>pip</em> to install packages and <em>conda</em> to manage packages. <em>Pip</em> is available for Windows, macOS and Linux. Pip sometimes is the better way to install packages and can install <a href="https://www.lfd.uci.edu/~gohlke/Pythonlibs">binary wheels on Windows</a>.</li>
<li>Using the distribution’s package manager (only on Ubuntu, that’s <code>sudo apt-get install python-*</code>).</li>
</ul>
<h4 id="conda-installation">Conda installation</h4>
<p>Conda can be downloaded in two versions: Anaconda and Miniconda. The difference is that Miniconda is just shipping the repository management system. So when it is installed, you will only have the management system without packages. Whereas with Anaconda, you get the distribution with most popular Python packages already built in.</p>
<p>In Geo-scripting Miniconda is used. To install Miniconda in your Linux environment, we have prepared a short <em>Bash</em> script for you. Just run the following lines of code, line by line, in a new terminal window.</p>
<div class="row">
<button class="source bash toggle btn btn-xs btn-primary">
<span class="glyphicon glyphicon-chevron-down"></span> bash source
</button>
<pre style=""><code class="source bash">git clone https://github.com/GeoScripting-WUR/InstallLinuxScript.git
cd InstallLinuxScript/user
chmod u+x ./install.sh
./install.sh</code></pre>
</div>
<!-- This should be kept for external students, TODO: think about how to combine this
<div class="row"><button class="source bash toggle btn btn-xs btn-primary"><span class="glyphicon glyphicon-chevron-down"></span> bash source</button><pre style=""><code class="source bash">MINICONDA_VERSION="Miniconda3-latest-Linux-x86_64"
pushd /tmp
curl -O https://repo.continuum.io/miniconda/${MINICONDA_VERSION}.sh
## This installation script will require user input
bash ${MINICONDA_VERSION}.sh
rm ${MINICONDA_VERSION}.sh
popd</code></pre></div>

<<<<<<< HEAD
Scroll down the license with enter. Accept License (i.e. type yes). Use default install location (i.e. press Enter). When prompted to prepend the Conda install location to path agree (i.e. type yes). This makes the Python interpreter of Conda the standard Python interpreter and allows you to run Conda commands from command line. *Finally, <u>restart your terminal</u> to be able to use conda in the terminal*. 
=======

Scroll down the license with enter. Accept License (i.e. type yes). Use default install location (i.e. press Enter). When prompted to prepend the Conda install location to path agree (i.e. type yes). This makes the Python interpreter of Conda the standard Python interpreter and allows you to run Conda commands from command line. -->
<p>This will install Miniconda into <code>~/miniconda3</code>, and also all the necessary packages for the Python week, into a new environment called <code>geoscripting</code>. You can also read the Bash code of the scripts you run to know exactly how they work.</p>
<p>Finally, restart your terminal to be able to use <code>conda</code> in the terminal. Next, let’s see how to use Conda in case you want to install packages or make new virtual environments by yourself.</p>
<h4 id="conda-usage">Conda usage</h4>
<p>Go to your terminal and type in:</p>
<div class="row">
<button class="source bash toggle btn btn-xs btn-primary">
<span class="glyphicon glyphicon-chevron-down"></span> bash source
</button>
<pre style=""><code class="source bash">conda search spyder</code></pre>
</div>
<p>This gives a list of all packages that have “Spyder” in the name and lists all available versions. To install:</p>
<div class="row">
<button class="source bash toggle btn btn-xs btn-primary">
<span class="glyphicon glyphicon-chevron-down"></span> bash source
</button>
<pre style=""><code class="source bash">conda install spyder</code></pre>
</div>
<p>This would install the latest version of the <em>Spyder</em> package (Python IDE). Note that this would install it into your user’s root virtual environment (by default it is <code>$HOME/miniconda3</code>). Conda creates isolated environments with sets of packages, that do not interfere with your base Python or with other conda environments. To create an environment:</p>
<div class="row">
<button class="source bash toggle btn btn-xs btn-primary">
<span class="glyphicon glyphicon-chevron-down"></span> bash source
</button>
<pre style=""><code class="source bash">conda create --name geotest python=2.7 numpy</code></pre>
</div>
<p>This would create a new environment called <em>geotest</em> with Python 2.7 and <em>NumPy</em> installed into the conda environment. To list the available environments:</p>
<div class="row">
<button class="source bash toggle btn btn-xs btn-primary">
<span class="glyphicon glyphicon-chevron-down"></span> bash source
</button>
<pre style=""><code class="source bash">conda info --envs</code></pre>
</div>
<p>Conda puts an asterisk (*) in front of the active environment. To activate the environment:</p>
<div class="row">
<button class="source bash toggle btn btn-xs btn-primary">
<span class="glyphicon glyphicon-chevron-down"></span> bash source
</button>
<pre style=""><code class="source bash">## Cross-platform
conda activate geotest
## Linux, macOS
source activate geotest
## Windows
activate geotest</code></pre>
</div>
<p>After this, the current environment is shown in (parentheses) in front of your prompt (<code>(geotest)$</code>). Note that the activated environment is only valid for the shell in which you activated it. For instance, if you close the shell window and open a new one you will have to activate it again. If you want to install a new package and are inside the conda environment, the package is installed simply with conda or pip. Generally, installing with conda is recommended. In the documentation of most Python packages the recommended way to install can be found.</p>
<div class="row">
<button class="source bash toggle btn btn-xs btn-primary">
<span class="glyphicon glyphicon-chevron-down"></span> bash source
</button>
<pre style=""><code class="source bash">conda install geopandas pandas
pip install rasterio rasterstats</code></pre>
</div>
<p>Sometimes packages are not directly available from the standard conda channels, but require a specific conda channel, such as conda-forge. The documentation of Python packages often show the recommended conda channel to install the Python package.</p>
<div class="row">
<button class="source bash toggle btn btn-xs btn-primary">
<span class="glyphicon glyphicon-chevron-down"></span> bash source
</button>
<pre style=""><code class="source bash">conda install --channel conda-forge folium</code></pre>
</div>
<p>Removing is just as simple.</p>
<div class="row">
<button class="source bash toggle btn btn-xs btn-primary">
<span class="glyphicon glyphicon-chevron-down"></span> bash source
</button>
<pre style=""><code class="source bash">conda remove geopandas pandas folium
pip uninstall rasterio rasterstats</code></pre>
</div>
<p>Now deactivate the environment and return to base environment.</p>
<div class="row">
<button class="source bash toggle btn btn-xs btn-primary">
<span class="glyphicon glyphicon-chevron-down"></span> bash source
</button>
<pre style=""><code class="source bash">## Cross-platform
conda deactivate
## Linux, macOS
source deactivate
## Windows
deactivate</code></pre>
</div>
<p>Since Python 2.7 is outdated and we want to work with Python 3, we can remove the environment <em>geotest</em>.</p>
<div class="row">
<button class="source bash toggle btn btn-xs btn-primary">
<span class="glyphicon glyphicon-chevron-down"></span> bash source
</button>
<pre style=""><code class="source bash">conda remove --name geotest --all</code></pre>
</div>
<p>In addition, as you saw with Spyder install, Conda is able to install some non-Python packages that have Python bindings, such as Spyder and GDAL. This is useful for making sure your Python and binary versions match and do not interfere with the system-wide ones. Some extra helpful utilities are:</p>
<ul>
<li><code>conda list</code> to check which packages are installed in <em>root</em> or in the active environment;</li>
<li><code>python --version</code> or <code>gdal-config --version</code> to check which Python or GDAL version is used in the environment;</li>
<li><code>which spyder</code> or <code>type spyder</code> to find out which Spyder executable is used either from system or conda environment.</li>
</ul>
<h2 id="running-python-in-terminal">Running Python in terminal</h2>
<p>For quick testing, Python can be started from terminal in Linux. Open a new terminal and type one of the lines with Python below.</p>
<div class="row">
<button class="source bash toggle btn btn-xs btn-primary">
<span class="glyphicon glyphicon-chevron-down"></span> bash source
</button>
<pre style=""><code class="source bash">python
# or 
python2
# or 
python3</code></pre>
</div>
<p>Test this script and find out what your Python version is inside Python.</p>
<div class="row">
<button class="source Python toggle btn btn-xs btn-primary">
<span class="glyphicon glyphicon-chevron-down"></span> Python source
</button>
<pre style=""><code class="source python">import sys
print('Good morning, you are running Python:', sys.version)</code></pre>
</div>
Okay enough fooling around. Time for some proper IDEs. Exit Python in the terminal to return to your normal terminal.
<div class="row">
<button class="source Python toggle btn btn-xs btn-primary">
<span class="glyphicon glyphicon-chevron-down"></span> Python source
</button>
<pre style=""><code class="source python">exit()
# or 
quit()</code></pre>
</div>
<h2 id="running-python-in-jupyter-notebooks">Running Python in Jupyter Notebooks</h2>
<p>Jupyter Notebooks make coding in Python much easier and allow for nice integrated visualizations. Jupyter is already set up for you in the <code>geoscripting</code> environment. If you don’t have this ‘geoscripting’ environment yet, create quickly one with the bash scripts below. These install a conda environment with all packages (and versions) that don’t conflict with each other for this course.</p>
<div class="row">
<button class="source bash toggle btn btn-xs btn-primary">
<span class="glyphicon glyphicon-chevron-down"></span> bash source
</button>
<pre style=""><code class="source bash">wget https://raw.githubusercontent.com/GeoScripting-WUR/InstallLinuxScript/master/user/environment.yml
conda env create -f environment.yml</code></pre>
</div>
<p>Time to run the Jupyter Notebook.</p>
<div class="row">
<button class="source bash toggle btn btn-xs btn-primary">
<span class="glyphicon glyphicon-chevron-down"></span> bash source
</button>
<pre style=""><code class="source bash">cd #reset working environment to default location
source activate geoscripting
jupyter notebook</code></pre>
</div>
<p>If everything goes according to plan, Jupyter will pop up in your browser. You will see a menu with all the files in your working directory. The Jupyter Notebook will only see files that are accessible from the working directory in which you launched the notebook!</p>
<p>Go to documents. Make a new folder: <em>New</em> → <em>Folder</em>, rename the folder (check the box next to the new ‘Untitled Folder’ and click <strong>‘Rename’</strong> in the top) and create new Python3 Jupyter Notebook <em>New</em> → <em>Python 3</em>. Give your notebook a name by clicking on <em>untitled</em>. Feel free to have a go at the user interface tour: <em>Help</em> → <em>User Interface Tour</em>.</p>
<p>Hover over the toolbar to check out all tools. These are the basic tools you will need today:</p>
<ul>
<li><em>Save and checkpoint</em></li>
<li><em>Insert cell below</em></li>
<li><em>Run</em></li>
<li><em>Code/Markdown/Heading</em> (List box)</li>
</ul>
<p>Similar to RMarkdown, Jupyter Notebooks have code cells (<em>Code</em>) and text cells (<em>Markdown</em>). Insert some extra cells by clicking the + button and change the first cell from code to markdown. Enter some documentation for your code (e.g. your team name, exercise and date). Leave the other cells on code. Type the following Python code in a code cell:</p>
<div class="row">
<button class="source Python toggle btn btn-xs btn-primary">
<span class="glyphicon glyphicon-chevron-down"></span> Python source
</button>
<pre style=""><code class="source python">import folium
m = folium.Map(location=[51.9700000, 5.6666700], zoom_start=13)
m</code></pre>
</div>
<p><img src="images/WUR_Basic_Folium_Map.png" alt="Wageningen University Basic Folium map" width="100%"></img></p>
<p>Run the code in a code cell, select it and press the <em>Run</em> button, or press <em>CTRL + Enter</em> or <em>Shift + Enter</em>. Wow! Try and drag the map to play around with it. Nice map :)</p>
<h2 id="python-refresher">Python refresher</h2>
<p>Additionally in this tutorial we will do a quick Python refresher.</p>
<div class="row">
<div class="alert alert-info">
<p>
<strong>Protip</strong>: Python has a specific way of doing things. It is called the <a href="https://docs.python-guide.org/writing/style/">Pythonic way</a> and stands for simple readable code.
</p>
</div>
</div>
<h3 id="looking-for-help">Looking for help</h3>
<p>If you are looking for help while programming in Python, there are several ways to find help. Usually googling solves your problem the quickest, because it finds answers on multiple platforms, such as StackOverflow and Github. During Geo-scripting we have the forum to ask and give help. Asking your friends or colleagues in person is also a great way to learn and fix programming problems. Another good option is get documentation from the package website or inside Python.</p>
<div class="row">
<button class="source Python toggle btn btn-xs btn-primary">
<span class="glyphicon glyphicon-chevron-down"></span> Python source
</button>
<pre style=""><code class="source python">import sys
help(sys)</code></pre>
</div>
<p>See how the functions in the <code>sys</code> package got listed.</p>
<div class="row">
<div class="alert alert-success">
<blockquote>
<p>
<strong>Question</strong> 1: What does this mean <code>__ __</code> around words: e.g: <code><strong>doc</strong></code>?
</p>
</blockquote>
</div>
</div>
<h3 id="numbers-and-variables">Numbers and variables</h3>
<div class="row">
<button class="source Python toggle btn btn-xs btn-primary">
<span class="glyphicon glyphicon-chevron-down"></span> Python source
</button>
<pre style=""><code class="source python">print(int(10.6))</code></pre>
</div>
<div class="row">
<div class="alert alert-success">
<blockquote>
<p>
<strong>Question 2</strong>: What is the difference between 10 and 10.0 when dealing with data types in Python?
</p>
</blockquote>
</div>
</div>
<p>Variable is a storage location or symbolic name to a value e.g.:</p>
<div class="row">
<button class="source Python toggle btn btn-xs btn-primary">
<span class="glyphicon glyphicon-chevron-down"></span> Python source
</button>
<pre style=""><code class="source python">building = 'Gaia'
buildingNumber = 101
building + ' is in Wageningen'</code></pre>
</div>
<p>There is no need to define the datatype, Python has a loose datatype variable declaration. Python is basically a list of objects.</p>
<h3 id="lists">Lists</h3>
<p>Now we will have a go with lists.</p>
<div class="row">
<div class="alert alert-info">
<p>
<strong>Protip</strong>: Variables, functions, classes and methods that you define in one of your Jupyter Notebook cells can be used in other cells too.
</p>
</div>
</div>
Run this code in one cell.
<div class="row">
<button class="source Python toggle btn btn-xs btn-primary">
<span class="glyphicon glyphicon-chevron-down"></span> Python source
</button>
<pre style=""><code class="source python">campus = ['Gaia', 'Lumen', 'Radix', 'Forum']
# how can we print Forum?
print(campus[3])
# how to access the end of the list (while having no idea how big it is)
print(campus[-1])
# how to access the first 3 items
print(campus[0:3])</code></pre>
</div>
Play around with this code in another cell. We will do some appending, inserting, extending and steps:
<div class="row">
<button class="source Python toggle btn btn-xs btn-primary">
<span class="glyphicon glyphicon-chevron-down"></span> Python source
</button>
<pre style=""><code class="source python">campus.append("Atlas")
campus.insert(1,"SoilMuseum")
campus.extend(["Action", "Vitae", "Zodiac"])
print(campus)
print(campus[::2])</code></pre>
</div>
<p>See how the notebook remembered how you set the variable <code>campus</code>.</p>
<div class="row">
<div class="alert alert-success">
<blockquote>
<p>
<strong>Question 3:</strong> What are the major differences between Append/Extend?
</p>
</blockquote>
</div>
</div>
<div class="row">
<div class="alert alert-success">
<blockquote>
<p>
<strong>Question 4:</strong> What building is <code>campus[-2]</code>?
</p>
</blockquote>
</div>
</div>
<h3 id="dictionaries-loops-ifelse">Dictionaries, loops, if/else</h3>
<p>Let there be dictionaries… A dictionary is an unordered set of key:value pairs. Like in the dictionary, ‘food’:‘voedsel’.</p>
<div class="row">
<button class="source Python toggle btn btn-xs btn-primary">
<span class="glyphicon glyphicon-chevron-down"></span> Python source
</button>
<pre style=""><code class="source python">campusDictionary = {101:'Gaia',
                    100:'Lumen',
                    107:'Radix',
                    102:'Forum',
                    104:'Atlas'}
print(campusDictionary[102])</code></pre>
</div>
<p>Loops: watch out here with code indentation. Python uses indentation to define code blocks and not <code>{}</code> like other languages. Indentation is either 1 tab or 4 spaces.</p>
<div class="row">
<button class="source Python toggle btn btn-xs btn-primary">
<span class="glyphicon glyphicon-chevron-down"></span> Python source
</button>
<pre style=""><code class="source python">campus = ['Gaia', 'Lumen', 'Radix', 'Forum']
for building in campus:
    print(building)</code></pre>
</div>
<p>Generic loops in Python have to interact over a sequence of objects e.g.</p>
<div class="row">
<button class="source Python toggle btn btn-xs btn-primary">
<span class="glyphicon glyphicon-chevron-down"></span> Python source
</button>
<pre style=""><code class="source python">range(5)
for number in range(5):
    print(number)</code></pre>
</div>
<p>Object interaction and functional programming is an important part of Python programming and its tools are extensive. <code>if</code>/<code>else</code>:</p>
<div class="row">
<button class="source Python toggle btn btn-xs btn-primary">
<span class="glyphicon glyphicon-chevron-down"></span> Python source
</button>
<pre style=""><code class="source python">x = 3
if x == 1:
    print("it is one")
elif x == 2:
    print("it is two")
elif x == 3:
    print("it is three")
else: 
    print("above 3")</code></pre>
</div>
<h3 id="functions">Functions</h3>
<p>A function is a section of code that does something specific that you want to use multiple times without having to type the full function again but just call the function by its name. Functions accept arguments and perform an action e.g.:</p>
<div class="row">
<button class="source Python toggle btn btn-xs btn-primary">
<span class="glyphicon glyphicon-chevron-down"></span> Python source
</button>
<pre style=""><code class="source python">def printHelloName(name):
    print("Good morning " + name)

printHelloName(name="Jan")

greeting = printHelloName(name="EnterYourName")
print(greeting)</code></pre>
</div>
<p><code>print</code> is used to print text or a number. As the example shows, printing to a variable does not store the information in the variable. <code>return</code> is used to indicate what you want to obtain from the function. You can <code>return</code> multiple items and return can be used to assign output to variables outside of the function.</p>
<div class="row">
<button class="source Python toggle btn btn-xs btn-primary">
<span class="glyphicon glyphicon-chevron-down"></span> Python source
</button>
<pre style=""><code class="source python">def times3(input_number):
    output_number = input_number * 3
    return output_number, input_number
    
print(times3(input_number=4))

output_number, input_number = times3(input_number=4)
print(output_number)
print(input_number)</code></pre>
</div>
<p>A best practice in programming is to keep variable and function names very informative! In complex functions or classes, the functions or classes can be made more informative by docstrings.</p>
<div class="row">
<button class="source Python toggle btn btn-xs btn-primary">
<span class="glyphicon glyphicon-chevron-down"></span> Python source
</button>
<pre style=""><code class="source python">def times3(input_number):
    """Multiplies input number times three.
    
    :input_number: input_number is an integer
    :returns: input_number * 3, input_number
    """
    outputNumber = input_number * 3
    return output_number, input_number
    
times3(input_number=4)
</code></pre>
</div>
<p>In this case docstrings are too much, but for larger functions or classes it is smart to have docstrings.</p>
<h3 id="importing-modules-and-packages">Importing modules and packages</h3>
<p>Python packages and modules are the bread and butter of Python. They make Python so great. Any Python file is a <em>module</em>, its name being the file’s base name without the .py extension. A <em>package</em> is a collection of Python modules: a package is a directory of Python modules containing an additional <code>__init__.py</code> file, to distinguish a package from a directory that just happens to contain a bunch of Python scripts. Packages can be nested to any depth, provided that the corresponding directories contain their own <code>__init__.py</code> file.</p>
<div class="row">
<button class="source Python toggle btn btn-xs btn-primary">
<span class="glyphicon glyphicon-chevron-down"></span> Python source
</button>
<pre style=""><code class="source python">import math
print(dir(math)) #show names in math package</code></pre>
</div>
Basically there are four ways to load a module from a package:
<div class="row">
<button class="source Python toggle btn btn-xs btn-primary">
<span class="glyphicon glyphicon-chevron-down"></span> Python source
</button>
<pre style=""><code class="source python">import math
print(math.pi)

from math import pi
print(pi)

from math import pi as Pi
print(Pi) 

import numpy as np
print(np.pi)</code></pre>
</div>
<div class="row">
<div class="alert alert-success">
<blockquote>
<p>
<strong>Question 5</strong>: Which is the best way to import modules?
</p>
</blockquote>
</div>
</div>
<h3 id="some-important-internal-modules">Some important internal modules:</h3>
<ul>
<li><code>os</code>: Access to operating system features</li>
<li><code>os.path</code>: Manipulating of file names</li>
<li><code>sys</code>: System specific configuration</li>
<li><code>glob</code>: Filename pattern matching</li>
<li><code>math</code>: Mathametical functions</li>
<li><code>datetime</code>: Date/Time manipulation</li>
</ul>
<div class="row">
<div class="alert alert-success">
<blockquote>
<p>
<strong>Question 6</strong>: What is the difference between <code>os</code> and <code>os.path</code>?
</p>
</blockquote>
</div>
</div>
<p>Some examples:</p>
<div class="row">
<button class="source Python toggle btn btn-xs btn-primary">
<span class="glyphicon glyphicon-chevron-down"></span> Python source
</button>
<pre style=""><code class="source python">import glob
glob.glob("*")</code></pre>
</div>
<div class="row">
<button class="source Python toggle btn btn-xs btn-primary">
<span class="glyphicon glyphicon-chevron-down"></span> Python source
</button>
<pre style=""><code class="source python">from datetime import date
birthday = date(2019, 3, 1)   #Fill in your own birthday
print(date.today())
timetillbirthday = birthday - date.today()
print("Ah only", timetillbirthday.days, "days left till my birthday")</code></pre>
</div>
<h3 id="file-access">File access</h3>
<p>File access is very simple for 99% of the cases. Write to a file and read from the same file with two simple lines. It is a best practice to use <code>with open</code> instead of <code>open</code> since it automatically closes the file. <a href="https://www.datacamp.com/community/tutorials/reading-writing-files-python">This tutorial on Datacamp</a> goes in depth on reading and writing files in Python.</p>
<div class="row">
<button class="source Python toggle btn btn-xs btn-primary">
<span class="glyphicon glyphicon-chevron-down"></span> Python source
</button>
<pre style=""><code class="source python"># Bad practice, because you might forget to close the file object
fileObj = open('test.txt','w')
fileObj.write('some simple text')
fileObj.close()</code></pre>
</div>
<div class="row">
<button class="source Python toggle btn btn-xs btn-primary">
<span class="glyphicon glyphicon-chevron-down"></span> Python source
</button>
<pre style=""><code class="source python"># Good practice: writing data
with open('test.txt','w') as file:
    file.write('some simple text')</code></pre>
</div>
<div class="row">
<button class="source Python toggle btn btn-xs btn-primary">
<span class="glyphicon glyphicon-chevron-down"></span> Python source
</button>
<pre style=""><code class="source python"># Good practice: reading data
with open('test.txt','r') as file:
    read_data = file.read()
print(read_data)</code></pre>
</div>
<div class="row">
<div class="alert alert-success">
<blockquote>
<p>
<strong>Question 7</strong>: What does <code>w</code>, <code>r</code> and <code>rw</code> mean?
</p>
</blockquote>
</div>
</div>
<h3 id="error-handling">Error handling</h3>
<p>Sometime problems occur… Errors detected during execution are called <em>exceptions</em>. Good programmers and good code deal with exceptions.</p>
<div class="row">
<button class="source Python toggle btn btn-xs btn-primary">
<span class="glyphicon glyphicon-chevron-down"></span> Python source
</button>
<pre style=""><code class="source python">with open('/foo0', 'r') as file:
    read_data = file.read()</code></pre>
</div>
<p>The file doesn’t exist, so the script stops and outputs an informative message saying there is no file found. If you want to script error handling yourself:</p>
<div class="row">
<button class="source Python toggle btn btn-xs btn-primary">
<span class="glyphicon glyphicon-chevron-down"></span> Python source
</button>
<pre style=""><code class="source python">filename = "/foo"
try:
    with open(filename, 'r') as file:
        read_data = file.read()
except FileNotFoundError as error:
    print("No such file or directory found: '" + filename + "'")</code></pre>
</div>
<h3 id="functional-and-object-oriented-programming">Functional and object-oriented programming</h3>
<p>Until now you have used functional programming. Functional programming is a programming paradigm, that treats computation as the evaluation of functions and avoids changing-state and mutable data. In <em>Python</em> functional and object-oriented programming are both common. Python uses classes to be object-oriented. Object-oriented programming (OOP) is a programming paradigm based on the concept of “objects”, which are data structures that contain data, in the form of fields, often known as attributes; and code, in the form of procedures/functions, often known as methods.</p>
<p>An <a href="https://www.datacamp.com/community/tutorials/python-oop-tutorial">example on Datacamp</a> helps to explain the OOP concept. In short take a class Dog. Don’t think of the dog as a specific dog. We’re describing what a dog in general is and can do. Dogs usually have a name and age; these are instance attributes. Dogs can also bark; this is a method. Create a general dog class by making a class with two attributes - name and age - and two methods - bark() and doginfo().</p>
<div class="row">
<button class="source Python toggle btn btn-xs btn-primary">
<span class="glyphicon glyphicon-chevron-down"></span> Python source
</button>
<pre style=""><code class="source python">class Dog:
    def __init__(self, name, age):  
        self.name = name
        self.age = age
        
    def bark(self):
        print("bark bark!")
    
    def doginfo(self):
        print(self.name + " is " + str(self.age) + " year(s) old.")</code></pre>
</div>
<p>Great. Now we can call the attributes and methods with the dot notation.</p>
<div class="row">
<button class="source Python toggle btn btn-xs btn-primary">
<span class="glyphicon glyphicon-chevron-down"></span> Python source
</button>
<pre style=""><code class="source python">ozzy = Dog("Ozzy", 2)
print(ozzy.name)
print(ozzy.age)
ozzy.bark()
ozzy.doginfo()</code></pre>
</div>
<p>During Geo-scripting we mostly perform functional programming to keep things simple. Sometimes class objects of modules will be used, such as a DataFrame in Pandas or a GeoDataFrame in GeoPandas. You don’t have to develop these classes, but you should know how to handle classes.</p>
<h3 id="visualization">Visualization</h3>
<p>Jupyter Notebooks can directly display output of your code, such as graphs, images and maps in the notebook. A lot of cool visualizations including Python source code are available from the <a href="https://Python-graph-gallery.com/">Python Graph Gallery</a>. Before we can do the visualizations, we want to add some Python packages via the terminal. Keep the terminal with Jupyter Notebook alive and start up a new terminal. The new terminal will be used to update the packages in the conda environment while the Jupyter Notebook keeps running.</p>
<div class="row">
<button class="source bash toggle btn btn-xs btn-primary">
<span class="glyphicon glyphicon-chevron-down"></span> bash source
</button>
<pre style=""><code class="source bash">conda install --name geoscripting matplotlib seaborn pyproj owslib</code></pre>
</div>
<p>We will make a graph with the <em>seaborn</em> module and plot it with <em>matplotlib</em>. Give it a try! The extra comments help to explain the parameters, but writing so many comments is not a recommended way to write code. The names of the functions, methods and parameters should mostly be self explanatory to extra comments.</p>
<div class="row">
<button class="source Python toggle btn btn-xs btn-primary">
<span class="glyphicon glyphicon-chevron-down"></span> Python source
</button>
<pre style=""><code class="source python">import seaborn as sns

# Set layout
sns.set(context='notebook', # Set type of layout
        style='whitegrid', # Set grid style
        palette='colorblind', # Set colors of graph
        font='Garuda',  # Set font type
        font_scale=2) # Set font size

# Load the iris dataset
iris = sns.load_dataset("iris")

# Plot sepal width as a function of sepal_length across days
g = sns.lmplot(x="sepal_length", # Define x-axis data from dataframe
               y="sepal_width", # Define y-axis data from dataframe
               hue="species", # Define groups with data from dataframe
               data=iris,  # Define dataframe               
               fit_reg=True, # Show linear regression
               truncate=True, # Truncate the linear regressions
               height=10, # Define size of graph
               markers=["o", "x", "s"], # Define types of markers
               scatter_kws={"s": 150}, # Define size of markers
               legend_out=False) # Define if legend should be in or out graph

g.ax.legend(loc=4) # Put legend at right bottom corner
g.ax.set_title("Sepal Width as a Function of Sepal Length across Days") # Set title of plot

# Use more informative axis labels than are provided by default
g.set_axis_labels("Sepal length (mm)", "Sepal width (mm)")
g</code></pre>
</div>
<p><img src="./images/Sepal_Width_Image.png" alt="Sepal Width Image" width = "60%"></img></p>
<p>Nice visualization! Generally functions of most Python packages have a lot of optional parameters to tweak the function, image or model to your liking. Sometimes it can be tricky to find what parameters you need, but you know how to look for help.</p>
<p>Ah this is a course in geospatial scripting. Let’s make an advanced map in Python with some markers and a way to measure the distance between markers. Just copy-paste and run the code below. We created here an example visualization to show some possibilities.</p>
<p>In short a few things that are good to know: some icons of the free font library <a href="https://fontawesome.com/icons">FontAwesome</a> are used. Plus some new libraries are introduced: <em>owslib</em> and <em>pyproj</em>. <a href="https://geopython.github.io/OWSLib/"><em>Owslib</em></a> is a Python package for client programming with Open Geospatial Consortium (OGC) web service (hence the name Owslib) interface standards, and their related content models. It allows to directly download rasters from web mapping services or vectors from web feature services. The second new package <a href="https://geopython.github.io/OWSLib/"><em>Pyproj</em></a> performs cartographic transformations and geodetic computations.</p>
<div class="row">
<button class="source Python toggle btn btn-xs btn-primary">
<span class="glyphicon glyphicon-chevron-down"></span> Python source
</button>
<pre style=""><code class="source python">import os
if not os.path.exists('data'): os.makedirs('data')
if not os.path.exists('output'): os.makedirs('output')

import folium
import geopandas as gpd
from pyproj import Proj, Transformer, transform
from owslib.wms import WebMapService
from owslib.wfs import WebFeatureService 
from folium.plugins import MeasureControl
from folium.raster_layers import ImageOverlay
from folium.vector_layers import PolyLine

## Set coordinates in RD_New and convert them to WGS84
## based on https://pyproj4.github.io/pyproj/stable/gotchas.html#upgrading-to-pyproj-2-from-pyproj-1
x, y = 174094, 444133
xmin, xmax, ymin, ymax = x-450, x+450, y-750, y+450
transformer = Transformer.from_crs(28992, 4326) # define a transformer object
min_lat, min_lon = transformer.transform(xmin, ymin) # mind the swap in axis order, see: https://geopandas.org/projections.html#the-axis-order-of-a-crs
max_lat, max_lon = transformer.transform(xmax, ymax)
avg_lat, avg_lon = transformer.transform(x, y)

# Download infrared orthophoto near Wageningen Campus
url = 'https://geodata.nationaalgeoregister.nl/luchtfoto/infrarood/wms?&request=GetCapabilities'
wms = WebMapService(url, version='1.3.0')
image = wms.getmap(layers=['Actueel_ortho25IR'], styles=['default'], srs='EPSG:28992',
                   bbox=(xmin, ymin, xmax, ymax), size=(200, 200), format='image/png')
imageFilename = 'data/WUR_Infrared_Orthophoto.png'
with open(imageFilename, 'wb') as file:
    file.write(image.read())

# Download roads around Wageningen Campus
WfsUrl = 'https://geodata.nationaalgeoregister.nl/nwbwegen/wfs?'
wfs = WebFeatureService(url=WfsUrl, version='2.0.0')
layer = list(wfs.contents)[0]
xmin, xmax, ymin, ymax = x-1000, x+350, y-1000, y+350
response = wfs.getfeature(typename=layer, bbox=(xmin, ymin, xmax, ymax))
with open('data/Roads.gml', 'wb') as file:
    file.write(response.read())

# Create basemaps: OpenStreetMap, Stamen Toner, Stamen Terrain, Stamen Watercolor
wageningenMap = folium.Map(location=[avg_lat, avg_lon], tiles = 'OpenStreetMap', zoom_start = 15)
folium.TileLayer('Stamen Toner').add_to(wageningenMap)
folium.TileLayer('Stamen Terrain').add_to(wageningenMap)
folium.TileLayer('Stamen Watercolor').add_to(wageningenMap)

# Create layer, add point markers and add layer to map
POILayer = folium.FeatureGroup(name="Points of interest in Wageningen")
POILayer.add_child(folium.Marker([51.987384, 5.666505], popup='Gaia Entrance at Wageningen University Campus',
                                 icon=folium.Icon(color='green',icon='university',prefix='fa')))
POILayer.add_child(folium.Marker([51.978761, 5.663023], popup='Shopping center Tarthorst',
                                 icon=folium.Icon(color='red', icon='fa-shopping-cart', prefix='fa')))
wageningenMap.add_child(POILayer)

# Load road features, transform coordinates to WGS84, create layer and add polyline  with GeoJson function
# folium.GeoJson is general function to plot either points, lines or polygons from a JSON.
# Folium has other ways to plot polygons, such as Polygon() and Chloropeth().
roads = gpd.GeoDataFrame(gpd.read_file('data/Roads.gml'))
roads.crs = {'init' :'epsg:28992'}
roads = roads.to_crs({'init' :'epsg:4326'})
RoadsLayer = folium.FeatureGroup(name="Roads")
RoadsLayer.add_child(folium.GeoJson(roads, style_function=lambda feature:{
        'fillColor': 'blue',    
        'fillOpacity': 0.6,
        'weight': 4,
        'color': 'darkblue'
        }))
wageningenMap.add_child(RoadsLayer)

# Create layer, add polyline and add layer to map
RouteLayer = folium.FeatureGroup(name="Route from campus to shopping center")
polylineLocations = [[51.987384, 5.666505], [51.986899, 5.666848], [51.985501, 5.661650], 
                     [51.981741, 5.664579], [51.979521, 5.664321], [51.979455, 5.663795],
                     [51.979078, 5.663753], [51.978761, 5.663023]]
RouteLayer.add_child(PolyLine(locations=polylineLocations, popup="Path from Gaia to Shopping Center", 
                              color="red", weight=2.5, opacity=1))
wageningenMap.add_child(RouteLayer)

# Overlay raster on top of map
orthophotoLayer = folium.FeatureGroup(name="Infrared Orthophoto of Wageningen")
orthophotoLayer.add_child(ImageOverlay(imageFilename, [[min_lat, min_lon], [max_lat, max_lon]], opacity=0.6))
wageningenMap.add_child(orthophotoLayer)

# Add measurement control and layer control
wageningenMap.add_child(MeasureControl())
wageningenMap.add_child(folium.LayerControl())

# Visualize map
wageningenMap # Jupyter Notebook allows interactive visualization in the Notebook
wageningenMap.save('output/wageningenMap.html') # The folium map can be stored as an HTML file and viewed by opening the HTML file</code></pre>
</div>
<p><img src="images/WageningenHTMLexample.png" alt="Wageningen University Folium map" width="100%"></img></p>
<p>Both the figure and maps show there are a lot of possibilities to make appealing graphs and maps in Python. Tweak some of the parameters to your liking or add some other geodata.</p>
<h3 id="exiting-the-jupyter-notebook">Exiting the Jupyter Notebook</h3>
<p>Your Jupyter Notebook is automatically saved as an .ipynb file on your computer (extension comes from the historic name “IPython Notebook”). The notebook can be downloaded as a Python script, pdf or html. You can also save it manually. To exit a notebook properly, use <em>File</em> → <em>Close and Halt</em>.</p>
<p>By pressing Ctrl + c in the terminal where Jupyter Notebook server is running, you cancel the running process. The terminal goes back to command line and you can exit the virtual environment by typing <code>source deactivate</code>.</p>
<div class="row">
<button class="source bash toggle btn btn-xs btn-primary">
<span class="glyphicon glyphicon-chevron-down"></span> bash source
</button>
<pre style=""><code class="source bash">source deactivate</code></pre>
</div>
<h1 id="excercise">Excercise</h1>
<p>The exercise for today was to finish the datacamp course: <a href="https://www.datacamp.com/courses/intro-to-python-for-data-science">Intro to Python for Data Science course</a>.</p>
<div class="row">
<div class="alert alert-info">
<p>
<strong>Protip</strong>: if you finished early and still want to learn more, then you can go through one of the guidelines or examples below. The <a href="https://gist.github.com/sloria/7001839">Python style guide</a> can be recommended for people who want to properly write Python code the Pythonic Way. If you are often stuck coding in Python, a <a href="https://ugoproto.github.io/ugo_py_doc/Python-3-Cheatsheet.pdf">cheat sheet</a> might help to put you back on track quickly. Furthermore, the <a href="https://github.com/jupyter/jupyter/wiki/A-gallery-of-interesting-Jupyter-Notebooks#earth-science-and-geo-spatial-data">Geo-Spatial Notebooks</a> are quite inspiring and interesting for any geo-scripter.
</p>
</div>
</div>
<h1 id="more-info">More info</h1>
<ul>
<li><a href="https://docs.Python.org/3.7/contents.html">Official Python tutorial</a></li>
<li><a href="https://gist.github.com/sloria/7001839">Python Style guide</a></li>
<li><a href="https://github.com/jupyter/jupyter/wiki/A-gallery-of-interesting-Jupyter-Notebooks#earth-science-and-geo-spatial-data">Geo-Spatial Notebooks</a></li>
<li><a href="https://ugoproto.github.io/ugo_py_doc/Python-3-Cheatsheet.pdf">Python 3 Cheatsheet</a></li>
<li><a href="https://www.datacamp.com/community/data-science-cheatsheets?tag=python">Overview Python package Cheatsheets</a></li>
<li><a href="https://geo-python.github.io">Geo Python course</a></li>
</ul>
</div>
</div>
</div>
<div id="push">

</div>
<div id="footer">
<div class="container">
<p class="text-muted" id="credit">
Styled with <a href="https://github.com/jimhester/knitrBootstrap">knitrBootstrap</a>
</p>
</div>
</div>
<link rel="stylesheet" id="theme" href="https://netdna.bootstrapcdn.com/bootswatch/3.0.0/simplex/bootstrap.min.css" media="screen"></link><link rel="stylesheet" id="highlight" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/7.3/styles/tomorrow-night-bright.min.css" media="screen"></link>
</div>
</body>
</html>
